# docker-compose example for fatc daemons stack: unix -> tcp
#
# This daemon listens on a backend network socket.
# fatc creates a frontend unix socket for it and proxies to the backend
# network socket
#
# redis is added, to show how the daemon can network with other containers in its
# own stack

version: "2.4"
services:

  # the name of this daemon must be unique to the fatc network
  http:
    image: nginx
    depends_on:
      - redis
    volumes:
      - /var/lib/fatc/daemons/daemon1/default.conf:/etc/nginx/conf.d/default.conf:ro
      - /var/lib/fatc/daemons/daemon1/index.html:/usr/share/nginx/html/index.html:ro
    networks:
      fatc:
        aliases:
          - http
  redis:
    image: redis

networks:
  fatc:
    external:
      name: fatc_proxy
