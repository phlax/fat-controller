#!/bin/sh

COMMAND=$2
SOCKET=$3

if [ $COMMAND = 'publish' ]; then
    echo "Starting publisher on $SOCKET"
    export ZMQ_ROUTER=publish_router.PublishRouter
    export ZMQ_APP_publish="ctrl.zmq.pubsub.ZMQPublisher $SOCKET"
    /controller/bin/ctrl zmq up
fi

if [ $COMMAND = 'rpc' ]; then
    echo "Starting listener on $SOCKET"
    export ZMQ_ROUTER=rpc_router.RPCRouter
    export ZMQ_APP_rpc="ctrl.zmq.rpc.ZMQRPCServer ipc://$SOCKET"
    /controller/bin/ctrl zmq up
fi
